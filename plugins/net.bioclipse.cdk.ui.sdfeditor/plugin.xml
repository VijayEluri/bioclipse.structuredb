<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
   <extension
         point="org.eclipse.ui.editors">
      <editor
            class="net.bioclipse.cdk.ui.sdfeditor.editor.MultiPageMoleculesEditorPart"
            default="true"
            extensions="sdf,smi"
            icon="icons/many_molecules.png"
            id="net.bioclipse.cdk.ui.sdfeditor"
            name="MoleculeTableEditor">
         <contentTypeBinding
               contentTypeId="net.bioclipse.contenttypes.sdf">
         </contentTypeBinding>
         <contentTypeBinding
               contentTypeId="net.bioclipse.contenttypes.cml.multipleMolecule2d">
         </contentTypeBinding>
         <contentTypeBinding
               contentTypeId="net.bioclipse.contenttypes.cml.multipleMolecule3d">
         </contentTypeBinding>
      </editor>
   </extension>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="net.bioclipse.cdk.ui.sdfeditor.jcptab">
         <or>
            <with
                  variable="activeEditor">
               <instanceof
                     value="net.bioclipse.cdk.jchempaint.editor.JChemPaintEditor">
               </instanceof>
            </with>
            <with
                  variable="activePart">
               <instanceof
                     value="net.bioclipse.cdk.ui.sdfeditor.editor.MultiPageMoleculesEditorPart">
               </instanceof>
            </with>
         </or>
      </definition>
   </extension>

      <extension
         point="org.eclipse.ui.newWizards">
      <category
            id="net.bioclipse.cdk.ChemistryFiles"
            name="Chemistry Files"/>
      <wizard
            canFinishEarly="false"
            category="net.bioclipse.cdk.ChemistryFiles"
            class="net.bioclipse.cdk.ui.wizards.NewSdfWizard"
            hasPages="true"
            icon="icons/many_molecules.png"
            id="net.bioclipse.cdk.ui.wizards.NewSdfWizard"
            name="SD File (from existing structures)">
         <description>
         Create a new SD file.
         </description>
      </wizard>
   </extension>

   <extension
         point="org.eclipse.help.toc">
      <toc
            file="toc.xml"
            primary="true"/>
   </extension>

    <extension
        point="org.eclipse.ui.commands">
        <command
           id="net.bioclipse.cdk.sdfeditor.handlers.extractEntries"
           defaultHandler="net.bioclipse.cdk.ui.sdfeditor.handlers.ExtractEntriesHandler"
           name="extractEntries"/>
  	</extension>

	<extension 
  		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:org.eclipse.ui.popup.any?after=additions">
		    <command
		    	commandId="net.bioclipse.cdk.sdfeditor.handlers.extractEntries"
		    	label="Extract Entries"
		        icon="icons/many_molecules.png">
		      	<visibleWhen>
			   		<iterate operator="and" ifEmpty="false">
		      			<adapt type="org.eclipse.core.resources.IResource">
			      			<or>
				                <test property="org.eclipse.core.resources.contentTypeId" 
				           	    	value="net.bioclipse.contenttypes.sdf"/>
				            </or>
			      		</adapt>
			   		</iterate>
		        </visibleWhen>
	       </command>
		</menuContribution>
	</extension>
</plugin>
